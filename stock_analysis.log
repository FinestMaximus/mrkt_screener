2025-04-05 12:38:22 - INFO - app - Application started
2025-04-05 12:38:22 - INFO - app - Starting application
2025-04-05 12:38:22 - INFO - app - Main function started
2025-04-05 12:38:23 - INFO - app - Setting up sidebar
2025-04-05 12:38:23 - INFO - app - Fetching market sentiment data
2025-04-05 12:38:28 - INFO - app - Getting configuration inputs from sidebar
2025-04-05 12:38:28 - INFO - app - Loading tickers from tickers.csv
2025-04-05 12:38:28 - INFO - app - Loaded 8 tickers from tickers.csv
2025-04-05 12:38:28 - INFO - app - Configuration complete.
2025-04-05 12:38:28 - INFO - app - Application completed successfully
2025-04-05 14:29:11 - INFO - app - Application started
2025-04-05 14:29:11 - INFO - app - Starting application
2025-04-05 14:29:11 - INFO - app - Main function started
2025-04-05 14:29:11 - INFO - app - Setting up sidebar
2025-04-05 14:29:11 - INFO - app - Fetching market sentiment data
2025-04-05 14:29:15 - INFO - app - Market sentiment data retrieved: Extreme Fear (13%)
2025-04-05 14:29:15 - INFO - app - Getting configuration inputs from sidebar
2025-04-05 14:29:15 - INFO - app - Loading tickers from tickers.csv
2025-04-05 14:29:15 - INFO - app - Loaded 8 tickers from tickers.csv
2025-04-05 14:29:15 - INFO - app - Configuration complete.
2025-04-05 14:29:16 - INFO - app - Application completed successfully
2025-04-05 14:29:19 - INFO - app - Application started
2025-04-05 14:29:19 - INFO - app - Starting application
2025-04-05 14:29:19 - INFO - app - Main function started
2025-04-05 14:29:19 - INFO - app - Setting up sidebar
2025-04-05 14:29:19 - INFO - app - Fetching market sentiment data
2025-04-05 14:29:23 - INFO - app - Market sentiment data retrieved: Extreme Fear (13%)
2025-04-05 14:29:23 - INFO - app - Getting configuration inputs from sidebar
2025-04-05 14:29:23 - INFO - app - Loading tickers from tickers.csv
2025-04-05 14:29:23 - INFO - app - Loaded 8 tickers from tickers.csv
2025-04-05 14:29:23 - INFO - app - Configuration complete.
2025-04-05 14:29:23 - INFO - app - Starting analysis with the following configuration:
2025-04-05 14:29:23 - INFO - app - Calculating date range
2025-04-05 14:29:23 - INFO - app - Using date range: 2020-04-06 to 2025-04-05
2025-04-05 14:29:23 - INFO - app - Fetching metrics data
2025-04-05 14:29:24 - INFO - app - Fetched metrics for 4 tickers
2025-04-05 14:29:24 - ERROR - app - An error occurred: All arrays must be of the same length
2025-04-05 14:29:25 - ERROR - app - Traceback (most recent call last):
  File "C:\Users\oussa\dev\mrkt_screener\app.py", line 284, in main
    filtered_companies_df = pd.DataFrame(list_metrics_all_tickers)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\pandas\core\frame.py", line 778, in __init__
    mgr = dict_to_mgr(data, index, columns, dtype=dtype, copy=copy, typ=manager)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\pandas\core\internals\construction.py", line 503, in dict_to_mgr
    return arrays_to_mgr(arrays, columns, index, dtype=dtype, typ=typ, consolidate=copy)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\pandas\core\internals\construction.py", line 114, in arrays_to_mgr
    index = _extract_index(arrays)
            ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\pandas\core\internals\construction.py", line 677, in _extract_index
    raise ValueError("All arrays must be of the same length")
ValueError: All arrays must be of the same length

2025-04-05 14:29:25 - INFO - app - Application completed successfully
2025-04-05 14:31:17 - INFO - app - Application started
2025-04-05 14:31:17 - INFO - app - Starting application
2025-04-05 14:31:17 - INFO - app - Main function started
2025-04-05 14:31:17 - INFO - app - Setting up sidebar
2025-04-05 14:31:17 - INFO - app - Fetching market sentiment data
2025-04-05 14:31:21 - INFO - app - Market sentiment data retrieved: Extreme Fear (13%)
2025-04-05 14:31:21 - INFO - app - Getting configuration inputs from sidebar
2025-04-05 14:31:21 - INFO - app - Loading tickers from tickers.csv
2025-04-05 14:31:21 - INFO - app - Loaded 8 tickers from tickers.csv
2025-04-05 14:31:21 - INFO - app - Configuration complete.
2025-04-05 14:31:21 - INFO - app - Application completed successfully
2025-04-05 14:31:23 - INFO - app - Application started
2025-04-05 14:31:23 - INFO - app - Starting application
2025-04-05 14:31:23 - INFO - app - Main function started
2025-04-05 14:31:23 - INFO - app - Setting up sidebar
2025-04-05 14:31:23 - INFO - app - Fetching market sentiment data
2025-04-05 14:31:27 - INFO - app - Market sentiment data retrieved: Extreme Fear (13%)
2025-04-05 14:31:27 - INFO - app - Getting configuration inputs from sidebar
2025-04-05 14:31:27 - INFO - app - Loading tickers from tickers.csv
2025-04-05 14:31:27 - INFO - app - Loaded 8 tickers from tickers.csv
2025-04-05 14:31:27 - INFO - app - Configuration complete.
2025-04-05 14:31:27 - INFO - app - Starting analysis with the following configuration:
2025-04-05 14:31:27 - INFO - app - Calculating date range
2025-04-05 14:31:27 - INFO - app - Using date range: 2020-04-06 to 2025-04-05
2025-04-05 14:31:27 - INFO - app - Fetching metrics data
2025-04-05 14:31:28 - INFO - app - Fetched metrics for 4 tickers
2025-04-05 14:31:28 - WARNING - app - Inconsistent data structures in metrics data. Attempting to normalize.
2025-04-05 14:31:28 - WARNING - app - No symbol column found, using original company symbols
2025-04-05 14:31:28 - INFO - app - Using 8 filtered company symbols
2025-04-05 14:31:28 - INFO - app - Fetching additional metrics
2025-04-05 14:31:28 - ERROR - app - An error occurred: Cannot hash argument 'self' (of type `data.fetcher.DataFetcher`) in 'fetch_additional_metrics_data'.

To address this, you can tell Streamlit not to hash this argument by adding a
leading underscore to the argument's name in the function signature:

```
@st.cache_data
def fetch_additional_metrics_data(_self, ...):
    ...
```
            
2025-04-05 14:31:28 - ERROR - app - Traceback (most recent call last):
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 625, in _to_bytes
    reduce_data = obj.__reduce__()
                  ^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\AppData\Roaming\uv\python\cpython-3.12.8-windows-x86_64-none\Lib\copyreg.py", line 70, in _reduce_ex
    raise TypeError(f"cannot pickle {cls.__name__!r} object")
TypeError: cannot pickle 'function' object

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 450, in _make_value_key
    update_hash(
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 162, in update_hash
    ch.update(hasher, val)
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 345, in update
    b = self.to_bytes(obj)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 327, in to_bytes
    b = b"%s:%s" % (tname, self._to_bytes(obj))
                           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 630, in _to_bytes
    self.update(h, item)
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 345, in update
    b = self.to_bytes(obj)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 327, in to_bytes
    b = b"%s:%s" % (tname, self._to_bytes(obj))
                           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 627, in _to_bytes
    raise UnhashableTypeError() from ex
streamlit.runtime.caching.cache_errors.UnhashableTypeError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\oussa\dev\mrkt_screener\app.py", line 342, in main
    metrics_filtered = data_fetcher.fetch_additional_metrics_data(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 175, in __call__
    return self._cached_func(self._instance, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 219, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 234, in _get_or_create_cached_value
    value_key = _make_value_key(
                ^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 458, in _make_value_key
    raise UnhashableParamError(cache_type, func, arg_name, arg_value, exc)
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 450, in _make_value_key
    update_hash(
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 162, in update_hash
    ch.update(hasher, val)
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 345, in update
    b = self.to_bytes(obj)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 327, in to_bytes
    b = b"%s:%s" % (tname, self._to_bytes(obj))
                           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 630, in _to_bytes
    self.update(h, item)
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 345, in update
    b = self.to_bytes(obj)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 327, in to_bytes
    b = b"%s:%s" % (tname, self._to_bytes(obj))
                           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\oussa\dev\mrkt_screener\.venv\Lib\site-packages\streamlit\runtime\caching\hashing.py", line 627, in _to_bytes
    raise UnhashableTypeError() from ex
streamlit.runtime.caching.cache_errors.UnhashableParamError: Cannot hash argument 'self' (of type `data.fetcher.DataFetcher`) in 'fetch_additional_metrics_data'.

To address this, you can tell Streamlit not to hash this argument by adding a
leading underscore to the argument's name in the function signature:

```
@st.cache_data
def fetch_additional_metrics_data(_self, ...):
    ...
```
            

2025-04-05 14:31:28 - INFO - app - Application completed successfully
